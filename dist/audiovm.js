!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.VAM={})}(this,function(e){"use strict";function n(e){var n={id:t++,time:0,context:{},stack:[],operations:[]};return Object.assign(n,e),n.exec=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;n.time<t&&--o&&n.operations.length;){var r=n.operations.pop();"function"==typeof r?r(n,e):"string"==typeof r&&"@"===r[0]?n.call(e,r):n.stack.push(r)}return n},n.load=function(e){for(var t=e.length;t--;)n.operations.push(e[t]);return n},n.call=function(e,t){var o=e[t];"function"==typeof o?o(n,e):console.warn(t+" is not a function.")},n}var t=1,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;return function(n){var t=setInterval(function(){return n(e)},1e3*e);return function(){return clearInterval(t)}}},r=/^(@[^-]+)(-.*)$/;e.process=n,e.clock=o,e.scheduler=function(){function e(e){for(var n=c.length-1;n>=0&&c[n].time<e.time;)n--;return c.splice(n+1,0,e),e}function t(t,o){return e(n({time:u}).load(t))}var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o(),u=0,c=[],f=Object.assign(r,{});return i(function(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,o=u+n,r=c.pop();r&&r.time<o&&t--;)r.exec(f,o),r.operations.length&&e(r),r=c.pop();r&&c.push(r),u=o}),t.lib=f,t},e.compiler=function(){return function e(n){var t=void 0;return n.reduce(function(n,o){return Array.isArray(o)?n.push(e(o)):(t=r.exec(o))?(n.push(t[2].slice(1)),n.push(t[1])):n.push(o),n},[])}},Object.defineProperty(e,"__esModule",{value:!0})});
