<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: library/alu.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: library/alu.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Arithmetic and Logic 
 * @module alu
 */

// module that works with negative numbers
export const wrap = (a, b) => (a % b + b) % b;

// A generic operation that pops one value from stack and pushes one result
const op1 = fn => proc => {
  proc.stack.push(fn(proc.stack.pop()));
};

// A generic operation that pops two values from the stack and pushes one result
const op2 = fn => proc => {
  proc.stack.push(fn(proc.stack.pop(), proc.stack.pop()));
};

// The core of stdlib commands. It include arithmetic, logic,
// execution and repetition

export default {
  /**
   * Add two values
   * @example
   * [1, 2, "@add"]
   */
  "@add": op2((b, a) => a + b),

  /**
   * Subtract two values
   * @example
   * [1, 0.5, "@sub"]
   */
  "@sub": op2((b, a) => a - b),

  /**
   * Multiply two values
   * 
   * @example
   * [2, 3, "@mul"]
   */
  "@mul": op2((b, a) => a * b),

  /**
   * Divide two values
   * [4, 2, "@div"]
   */
  "@div": op2((b, a) => (b === 0 ? 0 : a / b)),

  /**
   * Modulo for positive and negative numbers (Euclidean)
   * @see http://en.wikipedia.org/wiki/Modulo_operation 
   * @example
   * [4, -2, "@wrap"]
   */
  "@wrap": op2((b, a) => (b === 0 ? 0 : wrap(a, b))),

  /**
   * Standard module operation
   */
  "@mod": op2((b, a) => (b === 0 ? 0 : a % b)),

  /**
   * Negative of a value
   */
  "@neg": op1(a => -a),

  /**
   * Conditional execution
   * @param array trueBranch
   * @param array falseBranch
   * @param boolean condition
   * 
   * @example
   * [['@kick'], ['@snare'], true, '@cond']
   */
  "@cond": proc => {
    const cond = proc.stack.pop();
    const falseProgr = proc.stack.pop();
    const trueProgr = proc.stack.pop();
    if (cond) proc.load(trueProgr);
    else proc.load(falseProgr);
  },

  /** 
   * Greater than
   */
  "@>": op2((b, a) => a > b),

  /**
   *  Greater or equal than
   */
  "@>=": op2((b, a) => a >= b),

  /**
   * Less than
   */
  "@&lt;": op2((b, a) => a &lt; b),

  /**
   * Less or equal than
   */
  "@&lt;=": op2((b, a) => a &lt;= b),

  /**
   * Is equal
   */
  "@==": op2((b, a) => a === b),

  /**
   * Is not equal
   */
  "@!=": op2((b, a) => a !== b),

  /**
   * Logic not
   */
  "@not": op1(a => !a),

  /**
   * Logic and
   */
  "@and": op2((b, a) => a &amp;&amp; b),

  /**
   * Logic or
   */
  "@or": op2((b, a) => a || b)
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-alu.html">alu</a></li><li><a href="module-process.html">process</a></li><li><a href="module-stdlib.html">stdlib</a></li></ul><h3>Global</h3><ul><li><a href="global.html#clock">clock</a></li><li><a href="global.html#process">process</a></li><li><a href="global.html#scheduler">scheduler</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sun Aug 20 2017 01:41:45 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
